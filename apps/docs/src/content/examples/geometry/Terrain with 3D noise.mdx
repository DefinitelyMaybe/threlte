The key to creating "random" yet smooth terrain is using "noise".

To create a terrain map, we want to be able to input the x and y coordinate , and return a height value. To get the height we want to utilise 2D noise. There's a [SimplexNoise](https://github.com/mrdoob/three.js/blob/d24a6b48deae76f508af2b9870ae45340f68ba36/examples/jsm/math/SimplexNoise.js) class in the Three.js addons that produces noise values from an x and y inputs.

<Example path="geometry/terrain" />

## How is this done?

1. Create noise map

`const noise = createNoise2D()`

2. Create plane geometry

`const geometry = new PlaneGeometry(10, 10, 100, 100)`

<Tip type="tip">
  Plane geometries are defined in the xy-plane, to place it in the xz-plane, simply rotate the mesh
  that uses the geometry.
</Tip>

3. Loop over the vertices, setting each `z` value, to the noise value.

```ts
for (let i = 0; i < vertices.count; i += 1) {
  const x = vertices.getX(i)
  const y = vertices.getY(i)
  vertices.setZ(i, noise(x / 4, y / 4))
}
```

4. Attach the plane geometry to a mesh, and rotate it so that the plane lies flat.

```svelte
<T.Mesh
	{geometry}
	rotation.x={DEG2RAD * -90}
>
```
