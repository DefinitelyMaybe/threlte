The key to creating "random" yet smooth terrain is using "noise".

To create a terrain map, we want to be able to input the x and y coordinate , and return a height value. To get the height we want to utilise 2D noise. There's a [SimplexNoise](https://github.com/mrdoob/three.js/blob/d24a6b48deae76f508af2b9870ae45340f68ba36/examples/jsm/math/SimplexNoise.js) class in the Three.js addons that produces noise values from an x and y inputs.

<Example path="geometry/terrain" />

## Modifying the Height of Each Vertex

Changing the height of each vertex is accomplished by looping over the vertices of the geometry and setting the z-value of each vertex to a value generated by the noise function. The height of each value is the z component because the plane is created in the xy-plane. Z-values are modified and the plane is rotated to lay flat. Z-up is a very common coordinate system especially in structural design and 3D-printing.

```typescript
const noise = new SimplexNoise()

for (let i = 0; i < vertices.count; i += 1) {
  const x = vertices.getX(i)
  const y = vertices.getY(i)
  vertices.setZ(i, noise.noise(x / 4, y / 4))
}
```
