---
order: 2
category: '@threlte/studio'
name: 'Authoring Extensions'
---

## Extension Directory Structure

_All_ Studio functionality is provided by Studio Extensions. To make the Studio
suit your workflow, you may add your own Studio Extensions which may add toolbar
items, panes, have access to the scene and may access the state of other
extensions and run their actions.

<Tip type="warning">
  While it's technically possible to access and extend the Studio from anywhere within your app,
  it's highly recommended to follow this pattern to easily remove the Studio **including all
  extensions** from your app in production.
</Tip>

## Basic Example

```plaintext
extensions/
  my-extension/
    types.ts
    MyExtension.svelte
    useMyExtension.svelte.ts
```

This file provides type definitions for the extension state and actions.

```ts title="types.ts"
export const extensionScope = 'my-extension'

export type ExtensionState = {
  enabled: boolean
  count: number
}

export type ExtensionActions = {
  setEnabled: (enabled: boolean) => void
  toggleEnabled: () => void
  incrementCount: () => void
}
```

This file implements the extension.

<Tip type="warning">Extensions must include a slot element to render the scene.</Tip>

```svelte title="MyExtension.svelte"
<script lang="ts">
  import { useStudio } from '@threlte/studio'
  import { extensionScope, type ExtensionState, type ExtensionActions } from './types'

  const { createExtension } = useStudio()

  createExtension<ExtensionState, ExtensionActions>({
    scope: extensionScope,
    state({ persist }) {
      return {
        enabled: persist(true),
        count: 0
      }
    },
    actions: {
      toggleEnabled({ state }) {
        state.enabled = !state.enabled
      },
      setEnabled({ state }, enabled) {
        state.enabled = enabled
      },
      incrementCount({ state }) {
        state.count++
      }
    },
    keyMap() {
      return {
        incrementCount: '+'
      }
    }
  })
</script>

<!-- Extensions must include slot -->
<slot />
```

This file exposes a hook to interact with the extension. It should be the only
way to interact with the extension.

```ts title="useMyExtension.ts"
import { useStudio } from '@threlte/studio'
import { extensionScope, type ExtensionState, type ExtensionActions } from './types'

export const useMyExtension = () => {
  const { useExtension } = useStudio()

  const extension = useExtension<ExtensionState, ExtensionActions>(extensionScope)

  const setEnabled = (enabled: boolean) => {
    extension.setEnabled(enabled)
  }

  const toggleEnabled = () => {
    extension.toggleEnabled()
  }

  const incrementCount = () => {
    extension.incrementCount()
  }

  return {
    get enabled() {
      return extension.state.enabled
    },
    get count() {
      return extension.state.count
    },
    setEnabled,
    toggleEnabled,
    incrementCount
  }
}
```

## Usage

```svelte
<script lang="ts">
  import { Canvas } from '@threlte/core'
  import { Studio } from '@threlte/studio'
  import MyExtension from './MyExtension.svelte'
</script>

<Canvas>
  <Studio extensions={[MyExtension]}>
    <Scene />
  </Studio>
</Canvas>
```
